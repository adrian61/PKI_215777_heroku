<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>User panel</title>

    <link rel="stylesheet" href="/bootstrap.min.css">
    <link rel="stylesheet" href="/font-awesome.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<style type="text/css">
    .bs-example{
        margin: 20px;
    }
    .navbar{
        margin-bottom: 1rem;
    }
</style>
<body>
    <div>
        <nav class="navbar navbar-expand-lg navbar navbar-dark bg-primary">
            <a href="/logout"><img class="img-responsive hidden-xs" src="/logo.png" width="48" height="64" alt="" /></a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse2">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse2">
                <div class="navbar-nav">
                    <a href="/logout" class="nav-item nav-link active">Home</a>
                   
                </div>
                <div class="navbar-nav ml-auto">
                    <div class="nav-item nav-link active">Hello, <%=loggedUser%>.</div>
                    <img class="mb-4 rounded-circle z-depth-0" src="<%=imageProfile%>" alt="" width="32" height="32">
                    <a href="/logout" class="nav-item nav-link">Logout</a>
                </div>
            </div>
        </nav>
    </div>
    <div>
        <table class="table" id="users">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Joined</th>
                <th>Last visit</th>
                <th>Counter</th>
            </tr>
        </table>
        <script>
            $.getJSON('/users', function (data) {
                console.log(data);
                var tbl_body = document.createElement("tbody");
                $.each(data.rows, function () {
                    var tbl_row = tbl_body.insertRow();
                    $.each(this, function (k, v) {
                        var cell = tbl_row.insertCell();
                        cell.appendChild(document.createTextNode(v.toString()));
                    });
                });
                $("#users").append(tbl_body);
            });
        </script>
    </div>   
</body>

</html>